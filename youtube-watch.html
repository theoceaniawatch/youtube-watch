<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>YouTube Live or Latest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      background: black;
    }
    iframe {
      width: 100vw;
      height: 56.25vw; /* 16:9 */
      max-height: 100vh;
      border: none;
      display: block;
    }
  </style>
</head>
<body>

<div id="player"></div>

<script>
  const API_KEY = "AIzaSyBxkgmY2z3dD_8eE2bj2PhCw5UDEFBeaJc";
  const CHANNEL_ID = "UClld8wYNrW4K--4sHpM2Q8A";

  async function loadVideo() {
    // 1. Check if channel is live
    const liveResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&eventType=live&type=video&key=${API_KEY}`
    );
    const liveData = await liveResponse.json();

    // 2. If live, embed it
    if (liveData.items && liveData.items.length > 0) {
      const liveVideoId = liveData.items[0].id.videoId;
      embedVideo(liveVideoId);
      return;
    }

    // 3. Otherwise get most recent video
    const recentResponse = await fetch(
      `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&order=date&type=video&maxResults=1&key=${API_KEY}`
    );
    const recentData = await recentResponse.json();
    const recentVideoId = recentData.items[0].id.videoId;

    embedVideo(recentVideoId);
  }

  function embedVideo(videoId) {
    document.getElementById("player").innerHTML = `
      <iframe
        src="https://www.youtube.com/embed/${videoId}?rel=0"
        allowfullscreen
      ></iframe>
    `;
  }

  loadVideo();
</script>

</body>
</html>